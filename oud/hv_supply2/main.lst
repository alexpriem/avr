GAS LISTING D:\DOCUME~1\alex\LOCALS~1\Temp/ccAtUGJ0.s 			page 1


   1               		.file	"main.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.global __do_copy_data
   8               		.global __do_clear_bss
   9               		.text
  10               	.global	wait_until_key_pressed
  11               		.type	wait_until_key_pressed, @function
  12               	wait_until_key_pressed:
  13               	/* prologue: frame size=0 */
  14               	/* prologue end (size=0) */
  15               	.L3:
  16 0000 90B3      		in r25,48-0x20
  17 0002 80B3      		in r24,48-0x20
  18 0004 8923      		and r24,r25
  19 0006 87FD      		sbrc r24,7
  20 0008 00C0      		rjmp .L3
  21               	.L7:
  22 000a 879B      		sbis 48-0x20,7
  23 000c 00C0      		rjmp .L7
  24               	/* epilogue: frame size=0 */
  25 000e 0895      		ret
  26               	/* epilogue end (size=1) */
  27               	/* function wait_until_key_pressed size 8 (7) */
  28               		.size	wait_until_key_pressed, .-wait_until_key_pressed
  29               		.data
  30               	.LC0:
  31 0000 766F 6C74 		.string	"volt 20.1 mV"
  31      2032 302E 
  31      3120 6D56 
  31      00
  32               	.LC1:
  33 000d 766F 6C74 		.string	"volt?"
  33      3F00 
  34               		.text
  35               	.global	command_loop
  36               		.type	command_loop, @function
  37               	command_loop:
  38               	/* prologue: frame size=32 */
  39 0010 EF92      		push r14
  40 0012 FF92      		push r15
  41 0014 0F93      		push r16
  42 0016 1F93      		push r17
  43 0018 CF93      		push r28
  44 001a DF93      		push r29
  45 001c CDB7      		in r28,__SP_L__
  46 001e DEB7      		in r29,__SP_H__
  47 0020 A097      		sbiw r28,32
  48 0022 0FB6      		in __tmp_reg__,__SREG__
  49 0024 F894      		cli
  50 0026 DEBF      		out __SP_H__,r29
  51 0028 0FBE      		out __SREG__,__tmp_reg__
  52 002a CDBF      		out __SP_L__,r28
  53               	/* prologue end (size=14) */
GAS LISTING D:\DOCUME~1\alex\LOCALS~1\Temp/ccAtUGJ0.s 			page 2


  54 002c 0E94 0000 		call lcd_clrscr
  55 0030 60E0      		ldi r22,lo8(.LC0)
  56 0032 70E0      		ldi r23,hi8(.LC0)
  57 0034 8E01      		movw r16,r28
  58 0036 0F5F      		subi r16,lo8(-(1))
  59 0038 1F4F      		sbci r17,hi8(-(1))
  60 003a C801      		movw r24,r16
  61 003c 0E94 0000 		call strcpy
  62 0040 60E0      		ldi r22,lo8(.LC1)
  63 0042 70E0      		ldi r23,hi8(.LC1)
  64 0044 C801      		movw r24,r16
  65 0046 0E94 0000 		call strcpy
  66 004a 80E0      		ldi r24,lo8(sem_uart)
  67 004c E82E      		mov r14,r24
  68 004e 80E0      		ldi r24,hi8(sem_uart)
  69 0050 F82E      		mov r15,r24
  70               	.L21:
  71 0052 8091 0000 		lds r24,uart_done
  72 0056 8823      		tst r24
  73 0058 01F0      		breq .L21
  74 005a 8AE2      		ldi r24,lo8(42)
  75 005c 0E94 0000 		call lcd_putc
  76 0060 C701      		movw r24,r14
  77 0062 0E94 0000 		call lock
  78 0066 01E0      		ldi r16,lo8(1)
  79 0068 00C0      		rjmp .L14
  80               	.L15:
  81 006a E02F      		mov r30,r16
  82 006c F0E0      		ldi r31,lo8(0)
  83 006e E050      		subi r30,lo8(-(uartbuf))
  84 0070 F040      		sbci r31,hi8(-(uartbuf))
  85 0072 8081      		ld r24,Z
  86 0074 0E94 0000 		call lcd_putc
  87 0078 0F5F      		subi r16,lo8(-(1))
  88               	.L14:
  89 007a 8091 0000 		lds r24,uart_len
  90 007e 0817      		cp r16,r24
  91 0080 00F0      		brlo .L15
  92 0082 1092 0000 		sts uart_len,__zero_reg__
  93 0086 1092 0000 		sts uart_done,__zero_reg__
  94 008a C701      		movw r24,r14
  95 008c 0E94 0000 		call unlock
  96 0090 00C0      		rjmp .L21
  97               	/* epilogue: frame size=32 */
  98               	/* epilogue: noreturn */
  99               	/* epilogue end (size=0) */
 100               	/* function command_loop size 65 (51) */
 101               		.size	command_loop, .-command_loop
 102               		.data
 103               	.LC2:
 104 0013 6D61 696E 		.string	"main()\n"
 104      2829 0A00 
 105               		.text
 106               	.global	main
 107               		.type	main, @function
 108               	main:
 109               	/* prologue: frame size=0 */
GAS LISTING D:\DOCUME~1\alex\LOCALS~1\Temp/ccAtUGJ0.s 			page 3


 110               	/* prologue end (size=0) */
 111 0092 8F98      		cbi 49-0x20,7
 112 0094 979A      		sbi 50-0x20,7
 113 0096 8CE0      		ldi r24,lo8(12)
 114 0098 0E94 0000 		call lcd_init
 115 009c 0E94 0000 		call lcd_clrscr
 116 00a0 81E0      		ldi r24,lo8(1)
 117 00a2 0E94 0000 		call lcd_backlight
 118 00a6 0E94 0000 		call uart_init
 119 00aa 80E0      		ldi r24,lo8(.LC2)
 120 00ac 90E0      		ldi r25,hi8(.LC2)
 121 00ae 0E94 0000 		call lcd_puts
 122 00b2 0E94 0000 		call command_loop
 123               	.L23:
 124 00b6 00C0      		rjmp .L23
 125               	/* epilogue: frame size=0 */
 126               	/* epilogue: noreturn */
 127               	/* epilogue end (size=0) */
 128               	/* function main size 19 (19) */
 129               		.size	main, .-main
 130               	/* File "main.c": code   92 = 0x005c (  77), prologues  14, epilogues   1 */
GAS LISTING D:\DOCUME~1\alex\LOCALS~1\Temp/ccAtUGJ0.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
D:\DOCUME~1\alex\LOCALS~1\Temp/ccAtUGJ0.s:2      *ABS*:0000003f __SREG__
D:\DOCUME~1\alex\LOCALS~1\Temp/ccAtUGJ0.s:3      *ABS*:0000003e __SP_H__
D:\DOCUME~1\alex\LOCALS~1\Temp/ccAtUGJ0.s:4      *ABS*:0000003d __SP_L__
D:\DOCUME~1\alex\LOCALS~1\Temp/ccAtUGJ0.s:5      *ABS*:00000000 __tmp_reg__
D:\DOCUME~1\alex\LOCALS~1\Temp/ccAtUGJ0.s:6      *ABS*:00000001 __zero_reg__
D:\DOCUME~1\alex\LOCALS~1\Temp/ccAtUGJ0.s:12     .text:00000000 wait_until_key_pressed
D:\DOCUME~1\alex\LOCALS~1\Temp/ccAtUGJ0.s:37     .text:00000010 command_loop
D:\DOCUME~1\alex\LOCALS~1\Temp/ccAtUGJ0.s:108    .text:00000092 main

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
lcd_clrscr
strcpy
sem_uart
uart_done
lcd_putc
lock
uartbuf
uart_len
unlock
lcd_init
lcd_backlight
uart_init
lcd_puts
