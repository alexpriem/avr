GAS LISTING D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s 			page 1


   1               		.file	"uart.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.global __do_copy_data
   8               		.global __do_clear_bss
   9               		.text
  10               	.global	uart_putc
  11               		.type	uart_putc, @function
  12               	uart_putc:
  13               	/* prologue: frame size=0 */
  14               	/* prologue end (size=0) */
  15               	.L3:
  16 0000 5D9B      		sbis 43-0x20,5
  17 0002 00C0      		rjmp .L3
  18 0004 8CB9      		out 44-0x20,r24
  19               	/* epilogue: frame size=0 */
  20 0006 0895      		ret
  21               	/* epilogue end (size=1) */
  22               	/* function uart_putc size 4 (3) */
  23               		.size	uart_putc, .-uart_putc
  24               	.global	uart_puts
  25               		.type	uart_puts, @function
  26               	uart_puts:
  27               	/* prologue: frame size=0 */
  28               	/* prologue end (size=0) */
  29 0008 FC01      		movw r30,r24
  30 000a 00C0      		rjmp .L9
  31               	.L14:
  32 000c 5D9B      		sbis 43-0x20,5
  33 000e 00C0      		rjmp .L14
  34 0010 8CB9      		out 44-0x20,r24
  35               	.L9:
  36 0012 8191      		ld r24,Z+
  37 0014 8823      		tst r24
  38 0016 01F4      		brne .L14
  39               	/* epilogue: frame size=0 */
  40 0018 0895      		ret
  41               	/* epilogue end (size=1) */
  42               	/* function uart_puts size 9 (8) */
  43               		.size	uart_puts, .-uart_puts
  44               	.global	lock
  45               		.type	lock, @function
  46               	lock:
  47               	/* prologue: frame size=0 */
  48               	/* prologue end (size=0) */
  49 001a FC01      		movw r30,r24
  50 001c 81E0      		ldi r24,lo8(1)
  51 001e 8083      		st Z,r24
  52               	/* epilogue: frame size=0 */
  53 0020 0895      		ret
  54               	/* epilogue end (size=1) */
  55               	/* function lock size 4 (3) */
  56               		.size	lock, .-lock
  57               	.global	unlock
GAS LISTING D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s 			page 2


  58               		.type	unlock, @function
  59               	unlock:
  60               	/* prologue: frame size=0 */
  61               	/* prologue end (size=0) */
  62 0022 FC01      		movw r30,r24
  63 0024 1082      		st Z,__zero_reg__
  64               	/* epilogue: frame size=0 */
  65 0026 0895      		ret
  66               	/* epilogue end (size=1) */
  67               	/* function unlock size 3 (2) */
  68               		.size	unlock, .-unlock
  69               	.global	uart_printf
  70               		.type	uart_printf, @function
  71               	uart_printf:
  72               	/* prologue: frame size=34 */
  73 0028 A2E2      		ldi r26,lo8(34)
  74 002a B0E0      		ldi r27,hi8(34)
  75 002c E0E0      		ldi r30,pm_lo8(1f)
  76 002e F0E0      		ldi r31,pm_hi8(1f)
  77 0030 0C94 0000 		jmp __prologue_saves__+24
  78               	1:
  79               	/* prologue end (size=6) */
  80 0034 FE01      		movw r30,r28
  81 0036 BB96      		adiw r30,43
  82 0038 8191      		ld r24,Z+
  83 003a 9191      		ld r25,Z+
  84 003c FA83      		std Y+2,r31
  85 003e E983      		std Y+1,r30
  86 0040 8C01      		movw r16,r24
  87 0042 83E0      		ldi r24,lo8(3)
  88 0044 E82E      		mov r14,r24
  89 0046 F12C      		mov r15,__zero_reg__
  90 0048 EC0E      		add r14,r28
  91 004a FD1E      		adc r15,r29
  92 004c 00C0      		rjmp .L22
  93               	.L23:
  94 004e 8532      		cpi r24,lo8(37)
  95 0050 01F0      		breq .L24
  96               	.L40:
  97 0052 5D9B      		sbis 43-0x20,5
  98 0054 00C0      		rjmp .L40
  99 0056 00C0      		rjmp .L47
 100               	.L24:
 101 0058 0F5F      		subi r16,lo8(-(1))
 102 005a 1F4F      		sbci r17,hi8(-(1))
 103 005c F801      		movw r30,r16
 104 005e 8081      		ld r24,Z
 105 0060 8936      		cpi r24,lo8(105)
 106 0062 01F0      		breq .L30
 107 0064 8A36      		cpi r24,lo8(106)
 108 0066 00F4      		brsh .L33
 109 0068 8336      		cpi r24,lo8(99)
 110 006a 01F0      		breq .L29
 111 006c 8436      		cpi r24,lo8(100)
 112 006e 01F4      		brne .L39
 113 0070 00C0      		rjmp .L30
 114               	.L33:
GAS LISTING D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s 			page 3


 115 0072 8337      		cpi r24,lo8(115)
 116 0074 01F0      		breq .L31
 117 0076 8537      		cpi r24,lo8(117)
 118 0078 01F4      		brne .L39
 119 007a E981      		ldd r30,Y+1
 120 007c FA81      		ldd r31,Y+2
 121 007e 3296      		adiw r30,2
 122 0080 FA83      		std Y+2,r31
 123 0082 E983      		std Y+1,r30
 124 0084 4AE0      		ldi r20,lo8(10)
 125 0086 50E0      		ldi r21,hi8(10)
 126 0088 B701      		movw r22,r14
 127 008a 9291      		ld r25,-Z
 128 008c 8291      		ld r24,-Z
 129 008e 0E94 0000 		call utoa
 130 0092 00C0      		rjmp .L49
 131               	.L30:
 132 0094 E981      		ldd r30,Y+1
 133 0096 FA81      		ldd r31,Y+2
 134 0098 3296      		adiw r30,2
 135 009a FA83      		std Y+2,r31
 136 009c E983      		std Y+1,r30
 137 009e 4AE0      		ldi r20,lo8(10)
 138 00a0 50E0      		ldi r21,hi8(10)
 139 00a2 B701      		movw r22,r14
 140 00a4 9291      		ld r25,-Z
 141 00a6 8291      		ld r24,-Z
 142 00a8 0E94 0000 		call itoa
 143               	.L49:
 144 00ac C701      		movw r24,r14
 145 00ae 00C0      		rjmp .L48
 146               	.L29:
 147 00b0 E981      		ldd r30,Y+1
 148 00b2 FA81      		ldd r31,Y+2
 149 00b4 3296      		adiw r30,2
 150 00b6 FA83      		std Y+2,r31
 151 00b8 E983      		std Y+1,r30
 152 00ba 9291      		ld r25,-Z
 153 00bc 8291      		ld r24,-Z
 154               	.L34:
 155 00be 5D9B      		sbis 43-0x20,5
 156 00c0 00C0      		rjmp .L34
 157 00c2 00C0      		rjmp .L47
 158               	.L31:
 159 00c4 E981      		ldd r30,Y+1
 160 00c6 FA81      		ldd r31,Y+2
 161 00c8 3296      		adiw r30,2
 162 00ca FA83      		std Y+2,r31
 163 00cc E983      		std Y+1,r30
 164 00ce 9291      		ld r25,-Z
 165 00d0 8291      		ld r24,-Z
 166               	.L48:
 167 00d2 0E94 0000 		call uart_puts
 168 00d6 00C0      		rjmp .L27
 169               	.L39:
 170 00d8 5D9B      		sbis 43-0x20,5
 171 00da 00C0      		rjmp .L39
GAS LISTING D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s 			page 4


 172               	.L47:
 173 00dc 8CB9      		out 44-0x20,r24
 174               	.L27:
 175 00de 0F5F      		subi r16,lo8(-(1))
 176 00e0 1F4F      		sbci r17,hi8(-(1))
 177               	.L22:
 178 00e2 F801      		movw r30,r16
 179 00e4 8081      		ld r24,Z
 180 00e6 8823      		tst r24
 181 00e8 01F0      		breq .+2
 182 00ea 00C0      		rjmp .L23
 183               	/* epilogue: frame size=34 */
 184 00ec E6E0      		ldi r30,6
 185 00ee A296      		adiw r28,34
 186 00f0 0C94 0000 		jmp __epilogue_restores__+24
 187               	/* epilogue end (size=4) */
 188               	/* function uart_printf size 102 (92) */
 189               		.size	uart_printf, .-uart_printf
 190               	.global	uart_init
 191               		.type	uart_init, @function
 192               	uart_init:
 193               	/* prologue: frame size=0 */
 194               	/* prologue end (size=0) */
 195 00f4 10BC      		out 64-0x20,__zero_reg__
 196 00f6 83E3      		ldi r24,lo8(51)
 197 00f8 89B9      		out 41-0x20,r24
 198 00fa 88E1      		ldi r24,lo8(24)
 199 00fc 8AB9      		out 42-0x20,r24
 200 00fe 86E8      		ldi r24,lo8(-122)
 201 0100 80BD      		out 64-0x20,r24
 202 0102 1092 0000 		sts uart_len,__zero_reg__
 203 0106 1092 0000 		sts uart_done,__zero_reg__
 204 010a 1092 0000 		sts sem_uart,__zero_reg__
 205 010e 579A      		sbi 42-0x20,7
 206               	/* #APP */
 207 0110 7894      		sei
 208               	/* #NOAPP */
 209               	/* epilogue: frame size=0 */
 210 0112 0895      		ret
 211               	/* epilogue end (size=1) */
 212               	/* function uart_init size 17 (16) */
 213               		.size	uart_init, .-uart_init
 214               	.global	__vector_13
 215               		.type	__vector_13, @function
 216               	__vector_13:
 217               	/* prologue: frame size=0 */
 218 0114 1F92      		push __zero_reg__
 219 0116 0F92      		push __tmp_reg__
 220 0118 0FB6      		in __tmp_reg__,__SREG__
 221 011a 0F92      		push __tmp_reg__
 222 011c 1124      		clr __zero_reg__
 223 011e 2F93      		push r18
 224 0120 8F93      		push r24
 225 0122 9F93      		push r25
 226 0124 EF93      		push r30
 227 0126 FF93      		push r31
 228               	/* prologue end (size=10) */
GAS LISTING D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s 			page 5


 229 0128 2CB1      		in r18,44-0x20
 230 012a 8091 0000 		lds r24,uart_len
 231 012e 9CB1      		in r25,44-0x20
 232 0130 E82F      		mov r30,r24
 233 0132 F0E0      		ldi r31,lo8(0)
 234 0134 E050      		subi r30,lo8(-(uartbuf))
 235 0136 F040      		sbci r31,hi8(-(uartbuf))
 236 0138 9083      		st Z,r25
 237 013a 8F5F      		subi r24,lo8(-(1))
 238 013c 8093 0000 		sts uart_len,r24
 239 0140 2A30      		cpi r18,lo8(10)
 240 0142 01F4      		brne .L53
 241 0144 81E0      		ldi r24,lo8(1)
 242 0146 8093 0000 		sts uart_done,r24
 243               	.L53:
 244 014a 1092 0000 		sts sem_uart,__zero_reg__
 245               	/* epilogue: frame size=0 */
 246 014e FF91      		pop r31
 247 0150 EF91      		pop r30
 248 0152 9F91      		pop r25
 249 0154 8F91      		pop r24
 250 0156 2F91      		pop r18
 251 0158 0F90      		pop __tmp_reg__
 252 015a 0FBE      		out __SREG__,__tmp_reg__
 253 015c 0F90      		pop __tmp_reg__
 254 015e 1F90      		pop __zero_reg__
 255 0160 1895      		reti
 256               	/* epilogue end (size=10) */
 257               	/* function __vector_13 size 39 (19) */
 258               		.size	__vector_13, .-__vector_13
 259               		.comm uart_len,1,1
 260               		.comm uart_done,1,1
 261               		.comm sem_uart,1,1
 262               		.comm uartbuf,32,1
 263               	/* File "uart.c": code  178 = 0x00b2 ( 143), prologues  16, epilogues  19 */
GAS LISTING D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 uart.c
D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s:2      *ABS*:0000003f __SREG__
D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s:3      *ABS*:0000003e __SP_H__
D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s:4      *ABS*:0000003d __SP_L__
D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s:5      *ABS*:00000000 __tmp_reg__
D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s:6      *ABS*:00000001 __zero_reg__
D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s:12     .text:00000000 uart_putc
D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s:26     .text:00000008 uart_puts
D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s:46     .text:0000001a lock
D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s:59     .text:00000022 unlock
D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s:71     .text:00000028 uart_printf
D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s:192    .text:000000f4 uart_init
                            *COM*:00000001 uart_len
                            *COM*:00000001 uart_done
                            *COM*:00000001 sem_uart
D:\DOCUME~1\alex\LOCALS~1\Temp/ccuCE1CH.s:216    .text:00000114 __vector_13
                            *COM*:00000020 uartbuf

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
__prologue_saves__
utoa
itoa
__epilogue_restores__
